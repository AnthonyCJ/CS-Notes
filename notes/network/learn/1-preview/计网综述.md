# 计网综述

## 1. 推荐书籍

* 《计算机网络——自顶向下方法）
* 《TCP/IP 详解》





## 2. 综述

计算机网络主要指的就是<font color="ff9f44">**TCP/IP协议栈**</font>。

TCP/IP技术有一大部分隐藏于操作系统内核态，所以容易被遗忘。

学习过程中要反复记忆。





## 3. 重点内容

### 3.1 TCP/IP协议体系的认知

TCP/IP是分层的协议，有一大部分处于操作系统的内核。

另一部分处于用户空间，只有应用层，包括DNS、FTP、HTTP、HTTPS等。

平时接触的协议主要以应用层为主。但其他层的原理也要清楚。

* 协议的一部分处于用户态，一部分处于内核态
* 层与层之间的透明性
  * 下一层对上一层是透明的
  * 传输在每一层之间是对等的



### 3.2 链路层

链路层要掌握的内容有：

1. 以太网帧的格式
2. `MTU`的概念【最大传输的概念】
3. `ARP`协议和`RARP`协议【地址解析和逆地址解析：即网卡的MAC地址和IP地址互查的机制】

> ARP协议部分了解一下报文格式和互查机制即可



### 3.3 网络层

1. 掌握`IP`协议
   * 要掌握IP首部格式：如16位分片标识、DF不分片标志、MF更多分片标志、13位片偏移，8位生存时间TTL，16位的首部检验和等等
   * 掌握IP分片
     * IP数据包总长度大于MTU的值，需要IP分片，要能画出分片情况
     * 如何避免IP分片？可以在应用层限制也可以在传输层限制
     * 如何确定分片顺序
     * 接收端如何确定所有的IP分片数据包都已到达
   * IP选路【路由表】
     * 要熟练掌握路由表每个字段的含义
2. 掌握`ICMP`协议【因特网控制报文协议，是网络层和传输层之间的一个协议，次要一些】
   * 要掌握报文格式
   * 保温分两大类：查询（2种查询报文） + 差错（5种差错报文）



### 3.4 传输层

1. `UDP`协议【稍次要一些】
   * 掌握无连接、不可靠的特点
   * 掌握首部的各个字段
2. `TCP`协议
   * 特点
   * 首部字段【序号、确认号、首部长度、窗口大小、校验和 ... 】
   * 可靠机制
     * TCP连接控制机制：三次握手、四次挥手、同时打开、同时关闭、半关闭
     * TCP流量控制机制：滑动窗口、慢启动、拥塞避免、快速重传、快速恢复
     * TCP超时重传机制：四个定时器

> 为什么需要三次挥手、四次握手？
>
> 为什么TCP和UDP存在伪包头？



### 3.5 应用层

1. `DNS`协议【域名解析】
   * 掌握DNS协议的名字空间
   * DNS指针查询（反向查找或逆向解析）基本原理
   * DNS缓存
2. `FTP`协议【大致掌握即可】
   * FTP的两条连接：控制连接 + 数据连接（要清楚为社么要需要控制连接和数据连接？）
   * 两种工作模式：PASV + PORT
   * 各种 FTP指令 和 响应码
   * FTP断点续传、匿名FTP
3. `HTTP`协议
   * 报文格式：请求报文、响应报文、请求头各种字段、响应头各种字段
   * HTTP状态码
4. `HTTPS`协议
   * HTTPS的详细握手过程
   * 摘要算法、数字签名、数字证书的原理和过程













