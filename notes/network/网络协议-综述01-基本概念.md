---
title: 网络协议-综述01-基本概念
date: 
categories:
    - CS-Notes
    - network
    - network protocol
tags:
    - 计算机网络
    - 网络协议
---



网络协议综述、网络协议的基本概念。

<!-- more -->



## 1. 协议三要素

* **语法**。一段内容要符合一定的规则和格式。例如，括号要成对，结束要使用分号等。
* **语义**。一段内容要代表某种意义。例如数字减去数字是有意义的，数字减去文本一般来说就没有意义。
* **顺序**。即先干什么，后干什么。例如，可以先加上某个数值，然后再减去某个数值。

网络协议，即<font color="ffa600">计算机通过网络进行通信的规约</font>。只有通过网络协议，才能使一大片机器互相协作、共同完成一件事。

网络协议举例：

~~~html
HTTP/1.1 200 OK	
Date: Tue, 27 Mar 2018 16:50:26 GMT
Content-Type: text/html;charset=UTF-8
Content-Language: zh-CN

<!DOCTYPE html>
<html>
<head>
<base href="https://pages.kaola.com/" />
<meta charset="utf-8"/> <title>网易考拉3周年主会场</title>
~~~

**分析**

这是一段HTTP协议，先是<font color="ffa600">状态</font>，然后是<font color="ffa600">首部</font>，然后是<font color="ffa600">内容</font>。

<br><br><br>

## 2. 常用的网络协议

以一个例子串起相关概念。

<br><br>

### 2.1 应用层：DNS、HTTP、HTTPS

<br>

#### 2.1.1 解析域名：DNS

在浏览器输入某个`URL`，如 `https://www.kaola.com`，这是一个 `URL`。浏览器只知道名字是“www.kaola.com”，但是不知道具体的地点，所以不知道应该如何访问。于是，它打开地址簿去查找。可以使用一般的<font color="ffa600">地址簿协议 **DNS** </font>去查找，还可以使用另一种更加精准的地址簿查找协议 `HTTPDNS`。

> **URL**	**统一资源定位符**（**U**niform **R**esource **L**ocator），或称统一资源定位器、定位地址、URL地址[[1\]](https://zh.wikipedia.org/wiki/统一资源定位符#cite_note-1)）俗称网页地址，简称**网址**，是[因特网](https://zh.wikipedia.org/wiki/因特网)上标准的资源的地址（Address），如同在网络上的门牌。
>
> 统一资源定位符的标准格式如下：
> `[协议类型]://[服务器地址]:[端口号]/[资源层级UNIX文件路径][文件名]?[查询]#[片段ID]`
> 其中[访问凭证信息]、[端口号]、[查询]、[片段ID]都属于选填项。

> **DNS**	**域名系统**（**D**omain **N**ame **S**ystem）是互联网的一项服务。它作为将[域名](https://zh.wikipedia.org/wiki/域名)和[IP地址](https://zh.wikipedia.org/wiki/IP地址)相互[映射](https://zh.wikipedia.org/wiki/映射)的一个[分布式数据库](https://zh.wikipedia.org/wiki/分布式数据库)，能够使人更方便地访问[互联网](https://zh.wikipedia.org/wiki/互联网)。DNS使用[TCP](https://zh.wikipedia.org/wiki/传输控制协议)和[UDP](https://zh.wikipedia.org/wiki/用户数据报协议)[端口](https://zh.wikipedia.org/wiki/TCP/UDP端口列表)53[[1\]](https://zh.wikipedia.org/wiki/域名系统#cite_note-1)。当前，对于每一级域名长度的限制是63个字符，域名总长度则不能超过253个字符。

<br>

经过查找，最终都会得到这个地址：`106.114.138.24`。这个是 `IP` 地址，是互联网世界的“门牌号”。

> **IP**	**IP地址**（**I**nternet **P**rotocol Address），又译为**网际协议地址**、**互联网协议地址**。是[网际协议](https://zh.wikipedia.org/wiki/网际协议)中用于标识**发送**或**接收[数据报](https://zh.wikipedia.org/wiki/数据报)**的设备的一串数字。
> IP地址的两个主要功能：
>
> * **标识主机：**更具体地说，标识其网络接口，并且提供主机在网络中的位置；
> * **网络寻址：**网络协议的一个重要机制就是网络寻址（internet address）。该功能的目的是将 [数据报](https://zh.wikipedia.org/wiki/数据报) 从一个网络模块送到目的地。在发送的整个过程，IP地址（address）充当着目的地的位置，[域名](https://zh.wikipedia.org/wiki/域名)（name）意味着我们要找什么，[路由](https://zh.wikipedia.org/wiki/路由)（route）代表着如何到达目的地的这个过程。[[3\]](https://zh.wikipedia.org/wiki/IP地址#cite_note-3) 每个[IP数据包](https://zh.wikipedia.org/wiki/网际协议)的标头包含了发送主机的IP地址和目的主机的IP地址。

<br>

#### 2.1.2 打包请求：HTTP、HTTPS

知道了目标地址，浏览器就开始<font color="ffa600">打包它的请求</font>。对于普通的浏览请求，往往会使用 <font color="ffa600">**HTTP 协议**</font>；但是对于购物的请求，往往需要进行加密传输，因而会使用 <font color="ffa600">**HTTPS 协议**</font>。无论是什么协议，里面都会写明“你要买什么和买多少”。

<br><br>

### 2.2 传输层：TCP、UDP

<br>

#### 2.2.1 封装端口信息：TCP、UDP

DNS、HTTP、HTTPS 所在的层称为<font color="ffa600">**应用层**</font>。经过应用层封装后，浏览器会将应用层的包交给下一层去完成【**该过程通过 socket 编程实现**】。下一层是<font color="ffa600">**传输层**</font>。传输层有两种协议，一种是<font color="ffa600">无连接的协议 **UDP**</font>，一种是面<font color="ffa600">向连接的协议 **TCP**</font>。对于支付来讲，往往使用 TCP 协议。

> **面向连接**	TCP 会保证这个包能够到达目的地。如果不能到达，就会重新发送，直至到达。

TCP 协议里面有两个端口，一个是浏览器监听的端口，一个是电商的服务器监听的端口。**操作系统往往通过端口来判断，它得到的包应该给哪个进程。**

<br><br>

### 2.3 网络层：IP

<br>

#### 2.3.1 封装源、目的IP地址：IP协议

传输层封装完毕后，浏览器会将包交给操作系统的<font color="ffa600">**网络层**</font>。网络层的协议是<font color="ffa600"> **IP 协议**</font>。在 IP 协议里面会有

* 源 IP 地址——浏览器所在机器的 IP 地址
* 目标 IP 地址——电商网站所在服务器的 IP 地址。

<br>

拿到目标IP地址后，

